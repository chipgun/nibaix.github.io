<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <meta name="renderer" content="webkit"/>
    <meta name="force-rendering" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <script>if (/*@cc_on!@*/false || (!!window.MSInputMethodContext && !!document.documentMode)) window.location.href="https://support.dmeng.net/upgrade-your-browser.html?referrer="+encodeURIComponent(window.location.href); </script>
    
    
        <link rel="shortcut icon" href="/images/favicon.ico">
    
     
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.13.1/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/vuetify@2.2.30/dist/vuetify.min.css" rel="stylesheet">
    
<link rel="stylesheet" href="/css/main.css">

    
    







    
    
          

    
    
    
    
    <title>
        
            Special File Permissions of SUID GUID and Sticky Bit | 芝士盒
        
    </title>
    
    
<meta name="generator" content="Hexo 7.3.0"></head>
<body>
    <div id="app">
        <v-app>
            <v-content id="page">
                <v-container fluid>
                    <v-row>
                        <v-col cols="2" class="d-none d-md-block">
                            <div id="sidebar" class="float-right">
    <a href="/" rel="home">
        <v-avatar size=96>
            <img id="logo" src="/images/avatar.webp">     
        </v-avatar> 
    </a>
    <v-divider></v-divider>
    <div class="mini-menu">
        <v-btn icon href="/">
            <v-icon>home</v-icon>
        </v-btn>
        <v-btn icon href="/categories/">
            <v-icon>folder</v-icon>
        </v-btn>
        <v-btn icon href="/tags/">
            <v-icon>bookmark</v-icon>
        </v-btn>
        <v-btn icon @click="SetNightMode">
            <v-icon>{{ nightMode }}</v-icon>
        </v-btn>
    </div>
    <v-list id="main-menu" class="font-weight-bold" flat>
        
            
            <v-list-item href="/archives/" link>
            <v-list-item-icon><v-icon>archive</v-icon></v-list-item-icon>
            <v-list-item-content>
                Archives
            </v-list-item-content>
            </v-list-item>
        
            
            <v-list-item href="/about/" link>
            <v-list-item-icon><v-icon>account_circle</v-icon></v-list-item-icon>
            <v-list-item-content>
                About
            </v-list-item-content>
            </v-list-item>
        
            
            <v-list-item href="https://garybear.cn/" link>
            <v-list-item-icon><v-icon>rss_feed</v-icon></v-list-item-icon>
            <v-list-item-content>
                我的博客
            </v-list-item-content>
            </v-list-item>
        
            
            <v-list-item href="https://garybear.cn/hexo-theme-insulin/doc/#/" link>
            <v-list-item-icon><v-icon>insert_drive_file</v-icon></v-list-item-icon>
            <v-list-item-content>
                说明文档
            </v-list-item-content>
            </v-list-item>
        
    </v-list>
    <v-divider></v-divider>
    
        <div class="post-toc">
            <a href="/2022/05/31/Special-File-Permissions-of-SUID-GUID-and-Sticky-Bit/" class="toc-header">Table of Contents</a>
            <div class="toc-content">
                <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Overview"><span class="toc-number">1.</span> <span class="toc-text">Overview</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-SUID"><span class="toc-number">2.</span> <span class="toc-text">What is SUID?</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Why-can-a-normal-user-not-change-the-password-of-other-users"><span class="toc-number">2.1.</span> <span class="toc-text">Why can a normal user not change the password of other users?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#How-to-set-SUID-bit"><span class="toc-number">2.2.</span> <span class="toc-text">How to set SUID bit?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#How-to-remove-SUID"><span class="toc-number">2.3.</span> <span class="toc-text">How to remove SUID?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Difference-between-small-s-and-capital-S-as-SUID-bit"><span class="toc-number">2.4.</span> <span class="toc-text">Difference between small s and capital S as SUID bit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#How-to-find-all-files-with-SUID-set"><span class="toc-number">2.5.</span> <span class="toc-text">How to find all files with SUID set?</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-SGID"><span class="toc-number">3.</span> <span class="toc-text">What is SGID?</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#How-to-set-SGID"><span class="toc-number">3.1.</span> <span class="toc-text">How to set SGID?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#How-to-remove-SGID-bit"><span class="toc-number">3.2.</span> <span class="toc-text">How to remove SGID bit?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#How-to-find-files-with-SGID-set-in-Linux"><span class="toc-number">3.3.</span> <span class="toc-text">How to find files with SGID set in Linux</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-a-Sticky-Bit"><span class="toc-number">4.</span> <span class="toc-text">What is a Sticky Bit?</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#How-to-set-the-sticky-bit"><span class="toc-number">4.1.</span> <span class="toc-text">How to set the sticky bit?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#How-to-remove-the-sticky-bit"><span class="toc-number">4.2.</span> <span class="toc-text">How to remove the sticky bit:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#How-to-find-files-with-sticky-bit-set-in-Linux"><span class="toc-number">4.3.</span> <span class="toc-text">How to find files with sticky bit set in Linux</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Conclusion"><span class="toc-number">5.</span> <span class="toc-text">Conclusion</span></a></li></ol>
            </div>
        </div>
    

    <div id="footer">
        <div class="footer-social">
            
                
                <v-btn icon href="mailto:kb1000fx@gmail.com" target="_blank">
                    <v-icon>fas fa-envelope</v-icon>
                </v-btn>
            
                
                <v-btn icon href="https://github.com/kb1000fx" target="_blank">
                    <v-icon>fab fa-github</v-icon>
                </v-btn>
            
                
                <v-btn icon href="https://steamcommunity.com/profiles/76561198346798163" target="_blank">
                    <v-icon>fab fa-steam</v-icon>
                </v-btn>
            
                
                <v-btn icon href="https://weibo.com/kb1000fx" target="_blank">
                    <v-icon>fab fa-weibo</v-icon>
                </v-btn>
            
        </div>
        <v-divider></v-divider>
        <div class="footer-content">
            
                <span id="busuanzi_container_site_uv" style="display: none;"> 
                    Total Visitors <span id="busuanzi_value_site_uv"></span>
                </span>
                <br>
            
            <span>Theme: <a target="_blank" rel="noopener" href="https://github.com/kb1000fx/hexo-theme-insulin">Insulin</a></span><br>
            <span>Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a></span><br>
            <span>
                &copy; 2015 - 2025 
                nibaix
            </span>
        </div>
    </div>
</div>

                        </v-col>
                        <v-col cols="12" md="10">
                            <v-row>
  <v-col cols="12" md="8" align-self="end">
    <div id="site-header">
      <div id="site-title">
        <a href="/" rel="home">芝士盒</a>
      </div>
      <div id="site-description"></div>
      <div id="mobile-menu" class="d-block d-md-none">
        <v-text-field label="请输入关键字" data-src="search.xml" v-model="searchHeaderValue" prepend-inner-icon="search" clearable clear-icon="clear" @keydown.enter="EnterSearch(searchHeaderValue,false)"></v-text-field>
        <div class="mobile-mini-menu">
          <v-btn icon href="/">
              <v-icon>home</v-icon>
          </v-btn>
          <v-btn icon href="/categories/">
              <v-icon>folder</v-icon>
          </v-btn>
          <v-btn icon href="/tags/">
              <v-icon>bookmark</v-icon>
          </v-btn>
          <v-btn icon @click="SetNightMode">
              <v-icon>{{ nightMode }}</v-icon>
          </v-btn>
          
            
            <v-btn icon href="/archives/">
              <v-icon>archive</v-icon>
            </v-btn>
          
            
            <v-btn icon href="/about/">
              <v-icon>account_circle</v-icon>
            </v-btn>
          
            
            <v-btn icon href="https://garybear.cn/">
              <v-icon>rss_feed</v-icon>
            </v-btn>
          
            
            <v-btn icon href="https://garybear.cn/hexo-theme-insulin/doc/#/">
              <v-icon>insert_drive_file</v-icon>
            </v-btn>
          
        </div>
      </div>    
    </div>
  </v-col>  
  <v-col cols="4" align-self="end" class="d-none d-md-block">
    <v-col align-self="end">
      <v-text-field label="请输入关键字" data-src="search.xml" v-model="searchHeaderValue" prepend-icon="search" clearable clear-icon="clear" @keydown.enter="EnterSearch(searchHeaderValue,false)"></v-text-field>
    </v-col> 
  </v-col>
</v-row>

                            <v-card class="elevation-2 post-card">
    
    
        <div class="post-header">
  <a class="post-header-title font-weight-medium" href="/2022/05/31/Special-File-Permissions-of-SUID-GUID-and-Sticky-Bit/">Special File Permissions of SUID GUID and Sticky Bit</a>
  <div class="post-header-meta">   
    <span>
      <v-icon color="">event</v-icon>
      Posted on:&nbsp;2022-05-31
    </span>
    <span>
      <v-icon color="">event_available</v-icon>
      Edited on:&nbsp;2022-05-31
    </span>
    <span>
      <v-icon color="">folder</v-icon>
      In:&nbsp;<a class="category-link" href="/categories/Linux/">Linux</a>
    </span>
    
    <span>
      <v-icon color="">visibility</v-icon>
      Views:&nbsp;<span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv"></span></span>
    </span>
    
  </div>
</div>

    
    
    
    
    <div class="post-content typo">
        <h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><img src="/2022/05/31/Special-File-Permissions-of-SUID-GUID-and-Sticky-Bit/image-20220531172749073.jpg" class="">

<span id="more"></span>

<p>You see an s instead of x in the file permissions? Linux has some special file permissions called SUID, GUID and Sticky Bit. Know more about them.</p>
<p><em>File permissions and ownership are the basic and yet essential security concept in Linux. You probably are already familiar with these terms already. It typically looks like this:</em></p>
<img src="/2022/05/31/Special-File-Permissions-of-SUID-GUID-and-Sticky-Bit/image-20220531171129953.jpg" class="">

<p>Apart from these regular permissions, there are a few special file permissions and not many Linux users are aware of it.</p>
<img src="/2022/05/31/Special-File-Permissions-of-SUID-GUID-and-Sticky-Bit/image-20220531171306909.jpg" class="">

<p>To start talking about of special permissions, I am going to presume that you have some knowledge of the basic file permissions. If not, please <a target="_blank" rel="noopener" href="https://linuxhandbook.com/linux-file-permissions/">read our excellent guide explaining Linux file permission</a>.</p>
<p>Now I’m gonna show you some special permissions with new letters on Linux file system.</p>
<p>In this example, the <code>passwd</code> command, responsible to change the password of a user, has the letter <code>s</code> on the same place we expect to see <code>x</code> or <code>-</code>, for user permissions. It’s important to notice that this file belongs to root user and root group.</p>
<p>With this permission you don’t need to give <code>sudo</code> access to a specific user when you want him to run some root script.</p>
<h2 id="What-is-SUID"><a href="#What-is-SUID" class="headerlink" title="What is SUID?"></a>What is SUID?</h2><p><em><strong>When the SUID bit is set on an executable file, this means that the file will be executed with the same permissions as the owner of the executable file.</strong></em></p>
<img src="/2022/05/31/Special-File-Permissions-of-SUID-GUID-and-Sticky-Bit/image-20220531171446561.jpg" class="">

<p>Let’s take a practical example. If you look at the binary executable file of the <code>passwd</code> command, it has the SUID bit set.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">linuxhandbook:~$ <span class="built_in">ls</span> -l /usr/bin/passwd</span><br><span class="line">-rwsr-xr-x 1 root root 59640 Mar 22  2019 /usr/bin/passwd</span><br></pre></td></tr></table></figure>

<p>This means that any user running the <code>passwd</code> command will be running it with the same permission as root.</p>
<p>What’s the benefit? The <code>passwd</code> command needs to edit files like &#x2F;etc&#x2F;passwd, &#x2F;etc&#x2F;shadow to change the password. These files are owned by root and can only be modified by root. But thanks to the setuid flag (SUID bit), a regular user will also be able to modify these files (that are owned by root) and change his&#x2F;her password.</p>
<p>This is the reason why you can use the <code>passwd</code> command to change your own password despite of the fact that the files this command modifies are owned by root.</p>
<h3 id="Why-can-a-normal-user-not-change-the-password-of-other-users"><a href="#Why-can-a-normal-user-not-change-the-password-of-other-users" class="headerlink" title="Why can a normal user not change the password of other users?"></a>Why can a normal user not change the password of other users?</h3><p>Note that a normal user can’t change passwords for other users, only for himself&#x2F;herself. But why? If you can run the <code>passwd</code> command as a regular user with the same permissions as root and modify the files like &#x2F;etc&#x2F;passwd, why can you not change the password of other users?</p>
<p>If you check the code for the <code>passwd</code> command, you’ll find that it checks the UID of the user whose password is being modified with the UID of the user that ran the command. If it doesn’t match and if the command wasn’t run by root, it throws an error.</p>
<p>The setuid&#x2F;SUID concept is tricky and should be used with utmost cautious otherwise you’ll leave security gaps in your system. It’s an essential security concept and many commands (like <code>ping</code> command) and programs (like <code>sudo</code>) utilize it.</p>
<p>Now that you understand the concept SUID, let’s see how to set the SUID bit.</p>
<h3 id="How-to-set-SUID-bit"><a href="#How-to-set-SUID-bit" class="headerlink" title="How to set SUID bit?"></a>How to set SUID bit?</h3><p>I find the symbolic way easier while setting SUID bit. You can use the <code>chmod</code> command in this way:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> u+s file_name</span><br></pre></td></tr></table></figure>
<p>Here’s an example:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">linuxhandbook:~$ <span class="built_in">ls</span> -l test.txt</span><br><span class="line">-rwxrw-rw- 1 linuxhandbook linuxhandbook 0 Apr 12 17:51 test.txt</span><br><span class="line">linuxhandbook:~$ <span class="built_in">chmod</span> u+s test.txt</span><br><span class="line">linuxhandbook:~$ <span class="built_in">ls</span> -l test.txt</span><br><span class="line">-rwsrw-rw- 1 linuxhandbook linuxhandbook 0 Apr 12 17:52 test.txt</span><br></pre></td></tr></table></figure>

<p>You can also use the numeric way. You just need to add a fourth digit to the normal permissions. <strong>The octal number used to set SUID is always 4.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">linuxhandbook:~$ ls -l test2.txt</span><br><span class="line">-rwxrw-rw- 1 linuxhandbook linuxhandbook 0 Apr 12 17:53 test2.txt</span><br><span class="line">linuxhandbook:~$ chmod 4766 test2.txt</span><br><span class="line">linuxhandbook:~$ ls -l test2.txt</span><br><span class="line">-rwsrw-rw- 1 linuxhandbook linuxhandbook 0 Apr 12 17:54 test2.txt</span><br></pre></td></tr></table></figure>
<h3 id="How-to-remove-SUID"><a href="#How-to-remove-SUID" class="headerlink" title="How to remove SUID?"></a>How to remove SUID?</h3><p>You can use either the symbolic mode in <code>chmod</code> command like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod u-s test.txt</span><br></pre></td></tr></table></figure>

<p>Or, use the numeric way with 0 instead of 4 with the permissions you want to set:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 0766 test2.txt</span><br></pre></td></tr></table></figure>

<h3 id="Difference-between-small-s-and-capital-S-as-SUID-bit"><a href="#Difference-between-small-s-and-capital-S-as-SUID-bit" class="headerlink" title="Difference between small s and capital S as SUID bit"></a>Difference between small s and capital S as SUID bit</h3><p>Remember the definition of SUID? It allows a file to be <em><strong>executed</strong></em> with the same permissions as the owner of the file.</p>
<p>But what if the file doesn’t have execute bit set in the first place? Like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">linuxhandbook:~$ ls -l test.txt</span><br><span class="line">-rw-rw-rw- 1 linuxhandbook linuxhandbook 0 Apr 12 17:51 test.txt</span><br></pre></td></tr></table></figure>

<p>If you set the SUID bit, it will show a capital S, not small s:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">linuxhandbook:~$ chmod u+s test.txt</span><br><span class="line">linuxhandbook:~$ ls -l test.txt</span><br><span class="line">-rwSrw-rw- 1 linuxhandbook linuxhandbook 0 Apr 12 17:52 test.txt</span><br></pre></td></tr></table></figure>

<p>The S as SUID flag means there is an error that you should look into. You want the file to be executed with the same permission as the owner but there is no executable permission on the file. Which means that not even the owner is allowed to execute the file and if file cannot be executed, you won’t get the permission as the owner. This fails the entire point of setting the SUID bit.</p>
<h3 id="How-to-find-all-files-with-SUID-set"><a href="#How-to-find-all-files-with-SUID-set" class="headerlink" title="How to find all files with SUID set?"></a>How to find all files with SUID set?</h3><p>If you want to search files with this permission, use <code>find</code> command in the terminal with option -perm.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -perm /4000</span><br></pre></td></tr></table></figure>

<h2 id="What-is-SGID"><a href="#What-is-SGID" class="headerlink" title="What is SGID?"></a>What is SGID?</h2><p><em><strong>SGID is similar to SUID. With the SGID bit set, any user executing the file will have same permissions as the group owner of the file.</strong></em></p>
<p>It’s benefit is in handling the directory. When SGID permission is applied to a directory, all sub directories and files created inside this directory will get the same group ownership as main directory (not the group ownership of the user that created the files and directories).</p>
<img src="/2022/05/31/Special-File-Permissions-of-SUID-GUID-and-Sticky-Bit/image-20220531172317903.jpg" class="">

<p>Open your terminal and check the permission on the file &#x2F;var&#x2F;local:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">linuxhandbook:~$ ls -ld /var/local</span><br><span class="line">drwxrwsr-x 1 root staff 512 Apr 24  2018 /var/local</span><br></pre></td></tr></table></figure>

<p>This folder &#x2F;var&#x2F;local has the letter ‘s’ on the same place you expect to see ‘x’ or ‘-‘ for group permissions.</p>
<p>A practical example of SGID is with Samba server for sharing files on your local network. It’s guaranteed that all new files will not lose the permissions desired, no matter who created it.</p>
<h3 id="How-to-set-SGID"><a href="#How-to-set-SGID" class="headerlink" title="How to set SGID?"></a>How to set SGID?</h3><p>You can set the SGID bit in symbolic mode like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod g+s directory_name</span><br></pre></td></tr></table></figure>

<p>Here’s an example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">linuxhandbook:~$ ls -ld folder/</span><br><span class="line">drwxrwxr-x 2 linuxhandbook linuxhandbook 4096 Apr 12 19:32 folder/</span><br><span class="line">linuxhandbook:~$ chmod g+s folder</span><br><span class="line">linuxhandbook:~$ ls -ld folder/</span><br><span class="line">drwxrwsr-x 2 linuxhandbook linuxhandbook 4096 Apr 12 19:32 folder/</span><br></pre></td></tr></table></figure>

<p>You may also use the numeric way. You just need to add a fourth digit to the normal permissions. <strong>The octal number used to SGID is always 2.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">linuxhandbook:~$ ls -ld folder2/</span><br><span class="line">drwxrwxr-x 2 linuxhandbook linuxhandbook 4096 Apr 12 19:33 folder2/</span><br><span class="line">linuxhandbook:~$ chmod 2775 folder2</span><br><span class="line">linuxhandbook:~$ ls -ld folder2/</span><br><span class="line">drwxrwsr-x 2 linuxhandbook linuxhandbook 4096 Apr 12 19:33 folder2/</span><br></pre></td></tr></table></figure>

<h3 id="How-to-remove-SGID-bit"><a href="#How-to-remove-SGID-bit" class="headerlink" title="How to remove SGID bit?"></a>How to remove SGID bit?</h3><p>Just use the -s instead of +s like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod g-s folder</span><br></pre></td></tr></table></figure>

<p>Removing SGID is the same as removing SGID. Use the additional 0 before the permissions you want to set:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 0755 folder</span><br></pre></td></tr></table></figure>

<h3 id="How-to-find-files-with-SGID-set-in-Linux"><a href="#How-to-find-files-with-SGID-set-in-Linux" class="headerlink" title="How to find files with SGID set in Linux"></a>How to find files with SGID set in Linux</h3><p>To find all the files with SGID bit set, use this command:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -perm /2000</span><br></pre></td></tr></table></figure>

<h2 id="What-is-a-Sticky-Bit"><a href="#What-is-a-Sticky-Bit" class="headerlink" title="What is a Sticky Bit?"></a>What is a Sticky Bit?</h2><p><em><strong>The sticky bit works on the directory. With sticky bit set on a directory, all the files in the directory can only be deleted or renamed by the file owners only or the root.</strong></em></p>
<img src="/2022/05/31/Special-File-Permissions-of-SUID-GUID-and-Sticky-Bit/image-20220531172546528.jpg" class="">

<p>This is typically used in the &#x2F;tmp directory that works as the trash can of temporary files.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">linuxhandbook:~$ ls -ld /tmp</span><br><span class="line">drwxrwxrwt 1 root root 512 Apr 12 13:24 /tmp</span><br></pre></td></tr></table></figure>

<p>As you can see, the folder &#x2F;tmp, has the letter <em><strong>*t*</strong></em> on the same place we expect to see <strong>x</strong> or <strong>–</strong> for others permissions. This means that a user (except root) cannot delete the temporary files created by other users in the &#x2F;tmp directory.</p>
<h3 id="How-to-set-the-sticky-bit"><a href="#How-to-set-the-sticky-bit" class="headerlink" title="How to set the sticky bit?"></a>How to set the sticky bit?</h3><p>As always, you can use both symbolic and numeric mode to set the sticky bit in Linux.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +t my_dir</span><br></pre></td></tr></table></figure>

<p>Here’s an example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">linuxhandbook:~$ ls -ld my_dir/</span><br><span class="line">drwxrwxr-x 2 linuxhandbook linuxhandbook 4096 Apr 12 19:54 my_dir/</span><br><span class="line">linuxhandbook:~$ chmod +t my_dir/</span><br><span class="line">linuxhandbook:~$ ls -ld my_dir/</span><br><span class="line">drwxrwxr-t 2 linuxhandbook linuxhandbook 4096 Apr 12 19:54 my_dir/</span><br></pre></td></tr></table></figure>

<p>The numeric way is to add a fourth digit to the normal permissions. The octal number used for sticky bit is always 1.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">linuxhandbook:~$ ls -ld my_dir/</span><br><span class="line">drwxrwxr-x 2 linuxhandbook linuxhandbook 4096 Apr 12 19:55 my_dir/</span><br><span class="line">linuxhandbook:~$ chmod 1775 tmp2/</span><br><span class="line">linuxhandbook:~$ ls -ld tmp2/</span><br><span class="line">drwxrwxr-t 2 linuxhandbook linuxhandbook 4096 Apr 12 19:55 my_dir/</span><br></pre></td></tr></table></figure>

<h3 id="How-to-remove-the-sticky-bit"><a href="#How-to-remove-the-sticky-bit" class="headerlink" title="How to remove the sticky bit:"></a>How to remove the sticky bit:</h3><p>You can use the symbolic mode:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod -t my_dir</span><br></pre></td></tr></table></figure>

<p>Or the numeric mode with 0 before the regular permissions:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 0775 tmp2</span><br></pre></td></tr></table></figure>

<h3 id="How-to-find-files-with-sticky-bit-set-in-Linux"><a href="#How-to-find-files-with-sticky-bit-set-in-Linux" class="headerlink" title="How to find files with sticky bit set in Linux"></a>How to find files with sticky bit set in Linux</h3><p>This command will return all files&#x2F;directories in with sticky bit set:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">linuxhandbook:~$ find . -perm /1000</span><br></pre></td></tr></table></figure>

<p>If the directory doesn’t have the execute permission set for all, setting a sticky bit will result in showing T instead of t. An indication that things are not entirely correct with the sticky bit.</p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>I’ll put this picture here to recall what you have just learned:</p>
<img src="/2022/05/31/Special-File-Permissions-of-SUID-GUID-and-Sticky-Bit/image-20220531172749073.jpg" class="">

<p>This flexibility to manage folders, files and all their permissions are so important in the daily work of a sysadmin. You could see that all those special permissions are not so difficult to understand but it must be used with utmost caution.</p>
<p>I hope this article gave you a good understanding of the SUID, GUID and Sticky Bit in Linux. If you have questions or suggestions, please drop a comment below.</p>

    </div>
    <!--文末结束语-->
    
        <div style="text-align:center;color: #ccc;font-size:24px;"> --- 本文结束 <i class="fas fa-heart"></i> The End --- </div>
    
    <!--页脚广告-->
    
    <v-divider></v-divider>
    
    <div class="post-nav">             
        
            <div class="post-nav-button float-left">
                <v-icon>chevron_left</v-icon>
                <a class="font-weight-bold text-left" href="/2022/06/01/SH-re-open-after-70-days-lockdown/">
                    SH Re-Open After 70 Days Lockdown
                </a>
            </div>
              
          
            <div class="post-nav-button float-right">
                <a class="font-weight-bold text-right" href="/2022/05/29/first-day-of-workout-after-2-months-lockdown/">      
                    First Day of Workout After 2 Months Lockdown
                </a>
                <v-icon>chevron_right</v-icon>
            </div>
        
    </div>
</v-card>



        
                            <div id="mobile-footer" class="d-block d-md-none">
                                <v-divider></v-divider>
                                <div id="mobile-footer-content">
                                    <span>Theme: <a target="_blank" rel="noopener" href="https://github.com/kb1000fx/hexo-theme-insulin">Insulin</a> &nbsp; Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a></span><br>
                                    <span> &copy; 2015 - 2025 nibaix</span>
                                </div>
                            </div>                   
                        </v-col>                                            
                    </v-row>
                </v-container>
            </v-content>
        </v-app>
    </div>
    
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
<script src="https://cdn.jsdelivr.net/npm/vuetify@2.2.30"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/js-base64@3.5.2/base64.min.js"></script>

<script src="/js/main.js"></script>




    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




    <script src="https://cdn.jsdelivr.net/npm/mermaid@8.4.8/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({
        startOnLoad: true,
        theme: "default"
    });</script>





</body>
</html>