<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="icon" href="/img/favicon.png">

  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5/dist/css/bootstrap.min.css">


  
<link rel="stylesheet" href="/css/style.css">


  
  <title>PrimeTime-PX Flow - 芝士盒</title>
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  <header>
    <nav id="navbar" class="navbar fixed-nav scrolling-navbar">
  <div class="container">
    <div class="mark-wrapper">
      
        <img class="logo" src="/img/avatar.png "/>
       
      <div class="title-mark">芝士盒</div>
    </div>
  
    <button id="menu-btn" class="btn menu-btn" type="button" data-bs-toggle="collapse" data-bs-target="#nav-menu">
      <div class="menu-icon"><span></span><span></span><span></span></div>
    </button>
  
    <div id="nav-menu" class="collapse menu-wrapper">
      <ul>
        
          <li>
            <a href="/">Home </a>
          </li>
        
          <li>
            <a href="/archives">Archives </a>
          </li>
        
          <li>
            <a href="/categories">Category </a>
          </li>
        
          <li>
            <a href="/tags">Tag </a>
          </li>
        
          <li>
            <a href="/about">About </a>
          </li>
        
        <li class="search-icon">
          <button class="btn" data-bs-toggle="modal" data-bs-target="#searchModal" aria-label="Search">
            <i class="fas fa-search"></i>
          </button>
        </li>
      </ul>
    </div>
  </div>
</nav>

  </header>

  <main>
    <div class="container">
      <div id="main">
        <div class="row py-5">
          <div class="col">
            <div class="row">
  <div class="left-content">
    <article class="post-wrapper markdown-body">
  <h2 class="post-title">
    PrimeTime-PX Flow
  </h2>
  <div class="post-meta">
    <time datetime="Invalid date Invalid date ">2022-05-07</time>
    
    
      
        <a class="tag" href="/categories/VLSI/">VLSI</a> 
       
    
    
      
        <a class="tag" href="/tags/synopsys/">synopsys</a> 
      
        <a class="tag" href="/tags/lowpower/">lowpower</a> 
      
        <a class="tag" href="/tags/primetime/">primetime</a> 
      
        <a class="tag" href="/tags/sta/">sta</a> 
       
    
    
  </div>
  
  <div id="content">
    <p><strong>PT-PX</strong> is PrimeTime with power analysis. It’s a tool within PT (requires separate license of PT-PX). PT-PX combines simulation time window to report power within a window.</p>
<h2 id="Steps-Following-are-the-steps-to-invoke-PT-SI"><a href="#Steps-Following-are-the-steps-to-invoke-PT-SI" class="headerlink" title="Steps: Following are the steps to invoke PT-SI"></a>Steps: Following are the steps to invoke PT-SI</h2><h3 id="0-invoke-pt-shell-normally"><a href="#0-invoke-pt-shell-normally" class="headerlink" title="0. invoke pt_shell normally"></a>0. invoke pt_shell normally</h3><p><code>pt_shell-2012.12-SP3 -f scripts/run_power.tcl |tee logs/run_power.log</code> &#x3D;&gt; can be invoked in gui mode too.<br><strong>run_power.tcl</strong> has following cmds:</p>
<h3 id="1-set-library-read-gate-level-verilog-netlist-and-spef-file-same-as-in-normal-PT-flow-pwr-is-calc-for-chosen-PVT-corner"><a href="#1-set-library-read-gate-level-verilog-netlist-and-spef-file-same-as-in-normal-PT-flow-pwr-is-calc-for-chosen-PVT-corner" class="headerlink" title="1. set library, read gate level verilog netlist and spef file &#x3D;&gt; same as in normal PT flow. pwr is calc for chosen PVT corner."></a>1. set library, read gate level verilog netlist and spef file &#x3D;&gt; same as in normal PT flow. pwr is calc for chosen PVT corner.</h3><span id="more"></span>

<figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> search_path <span class="string">&quot;$search_path /db/pdkoa/1533e035/current/diglib/pml48h/synopsys/bin&quot;</span></span><br><span class="line"><span class="keyword">set</span> target_library PML48H_W_85_3_CORE.db</span><br><span class="line"><span class="keyword">set</span> link_library &#123;* PML48H_W_85_3_CORE.db&#125;</span><br><span class="line"></span><br><span class="line">read_verilog /db/ATAGO/.../FinalFiles/digtop_final_route.v =&gt; <span class="keyword">read</span> final routed netlist</span><br><span class="line">current_design digtop</span><br><span class="line">link</span><br><span class="line"></span><br><span class="line">read_parasitics /db/ATAGO/.../FinalFiles/digtop_final_route_max.spef =&gt; <span class="keyword">read</span> max spef <span class="keyword">file</span></span><br></pre></td></tr></table></figure>

<h3 id="2-set-power-analysis-so-that-PTPX-license-is-invoked"><a href="#2-set-power-analysis-so-that-PTPX-license-is-invoked" class="headerlink" title="2. set power analysis so that PTPX license is invoked"></a>2. set power analysis so that PTPX license is invoked</h3><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> power_enable_analysis true</span><br><span class="line"><span class="keyword">set</span> power_analysis_mode averaged</span><br></pre></td></tr></table></figure>

<h3 id="3-Read-VCD-file-from-one-of-the-simulation-it-needs-to-be-gate-level-VCD-file-with-back-annotation-of-parasitics"><a href="#3-Read-VCD-file-from-one-of-the-simulation-it-needs-to-be-gate-level-VCD-file-with-back-annotation-of-parasitics" class="headerlink" title="3. Read VCD file from one of the simulation (it needs to be gate level VCD file with back annotation of parasitics)"></a>3. Read VCD file from one of the simulation (it needs to be gate level VCD file with back annotation of parasitics)</h3><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">read_vcd /sim/ATAGO/.../sim1_max.vcd.gz -strip_path digtop_tb/IDUT/spi_regs -<span class="keyword">time</span> &#123;<span class="number">100489</span> <span class="number">800552</span>&#125; =&gt; strips module of interest so that pwr is reported starting from that module as top level. <span class="keyword">time</span> is in ns.</span><br><span class="line">report_switching_activity &gt; reports/power_swtching.rpt =&gt; to examine tr/sp (see below) and vcd <span class="keyword">file</span> syntax</span><br></pre></td></tr></table></figure>
<h3 id="4-report-power"><a href="#4-report-power" class="headerlink" title="4. report power"></a>4. report power</h3><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#check_power -verbose =&gt; prior to analysis, verifies that analysis i/p are valid</span></span><br><span class="line"><span class="comment">#update_power =&gt; This is needed for RTL VCD or when no vcd provided to propagate activity to nets/registers not annotated from RTL VCD file.</span></span><br><span class="line"><span class="comment">#report_switching_activity =&gt; to examine propagated values of tr/sp</span></span><br><span class="line"><span class="comment">#create_power_waveforms -cycle_accurate =&gt; to show pwr waveform</span></span><br><span class="line">report_power &gt; ./reports/power_summary.rpt</span><br><span class="line">report_power -hier &gt; ./reports/power_hierarchy.rpt</span><br><span class="line"><span class="comment">#report_power -cell -flat -net -hier -verbose -nosplit &gt; power_detail.rpt</span></span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure>

<h2 id="Reports-power-summary-report"><a href="#Reports-power-summary-report" class="headerlink" title="Reports: power summary report"></a>Reports: power summary report</h2><h3 id="Static-Power"><a href="#Static-Power" class="headerlink" title="Static Power"></a>Static Power</h3><p>Cell Leakage power. It’s leakage in the cell from VDD to VSS when cell i&#x2F;p is at 0 or 1 (subthreshold lkg from src to drn since gates never turn off completely). It includes gate lkg also (gate lkg is captured only for i&#x2F;p pins for each transistor, as o&#x2F;p pin will finally connect to i&#x2F;p pin of some other transistor. gate lkg is just the current flowing into the gate when i&#x2F;p of gate is 0 or 1). cell lkg pwr number comes from <em>.lib file. Pwr(lkg)&#x3D;V</em>I(subthreshold_lkg)+V*I(gate_lkg).<br>It has a default lkg pwr number for each cell, as well as different lkg pwr numbers depending on diff i&#x2F;p values. ex:<br>cell (AN210_3V) {<br>cell_leakage_power : 1.731915E+00; &#x3D;&gt; default lkg pwr<br>leakage_power () { &#x3D;&gt; we can have many of these conditions for each cell<br>value : 1.718650E+00; &#x3D;&gt; lkg pwr &#x3D; 1.7pW when A&#x3D;1 and B&#x3D;0. pwr unit defined as pw by “leakage_power_unit : “1pW”;” in .lib file<br>when : “A&amp;!B”;<br>}</p>
<h3 id="Dynamic-Power"><a href="#Dynamic-Power" class="headerlink" title="Dynamic Power"></a>Dynamic Power</h3><p><em><strong>A. internal pwr:</strong></em> This includes short ckt pwr when cell o&#x2F;p is switching, as well as pwr due to charging of internal nodes in the cell (due to src&#x2F;drn cap on all o&#x2F;p nodes and gate cap on internal nodes). cell int pwr number comes from <em>.lib file. Pwr(int)&#x3D;Eint</em>Tr where Tr&#x3D;number of toggles&#x2F;time.<br>Just like timing() section, we have internal_power() section for o&#x2F;p pin. It shows int pwr for each combination of i&#x2F;p values (as pwr will change due to short ckt current, drn&#x2F;src cap changing). ex:<br>cell (AN210_3V) {<br>pin (Y) { &#x3D;&gt; pwr is always for o&#x2F;p pin, since i&#x2F;p pin pwr is calcualted separately as switching pwr.<br>internal_power () { &#x3D;&gt; pwr unit is in pJ &#x3D; power unit(pW) * time_unit(s) (it’s energy, not power).<br>related_pin : “A”; &#x3D;&gt; this is when o&#x2F;p changes due to i&#x2F;p pin A changing<br>rise_power (outputpower_cap4_trans5) { … 34.39 .. } &#x3D;&gt; pwr under diff cap load on o&#x2F;p pin, and diff slew on i&#x2F;p pin<br>fall_power (outputpower_cap4_trans5) { … 34.39 .. } &#x3D;&gt; fall_power is when o&#x2F;p pin falls due to pin A rising&#x2F;falling<br>}<br>internal_power () {<br>related_pin : “B”; &#x3D;&gt; this is when o&#x2F;p changes due to i&#x2F;p pin B changing<br>rise_power (outputpower_cap4_trans5) { … 34.39 .. } &#x3D;&gt; rise_power is when o&#x2F;p pin rises due to pin B rising&#x2F;falling<br>fall_power (outputpower_cap4_trans5) { … 40 .. } &#x3D;&gt; 40pJ energy per toggle. Since time is in ns, pwr&#x3D;mw??<br>}<br>}<br>}</p>
<p><em><strong>B. switching pwr:</strong></em> This is due to charging&#x2F;discharging of all the o&#x2F;p load in design. This includes wire cap and gate cap on i&#x2F;p pins which switch whenever o&#x2F;p pin of any gate switches. Pwr(sw)&#x3D;0.5<em>C</em>V^2*Tr. Tr&#x3D;number of toggles&#x2F;time.</p>
<p>Total_pwr &#x3D; Pwr(lkg) + Pwr(int) + Pwr(sw) &#x3D; Pwr(lkg) + Eint<em>Tr + 0.5</em>C<em>V^2</em>Tr (Pwr(lkg) and Eint come from.lib).<br>To calc avg pwr, static probability (Sp) is calcualted for all the nodes to be at 1 or 0. This is then used to calc lkg pwr for each cell. Toggle rate is caluclated for each node to calc dynamic pwr.<br>To calc peak pwr, vcd file is required to analyze events. It’s useful for dynamic IR drop. If vcd file not provided, then tool doesn’t know the seq of events. Merely toggle rate doesn’t tell it whether all nodes toggle at same time or not.<br>When VCd file is not provided, default Tr&#x2F;Sp is applied to starting points (PI, black box o&#x2F;p). default Tr&#x2F;Sp can be modified using (power_default_toggle_rate, power_default_static_probability)</p>

  </div>

</article>
  </div>
  <div class="right-content">
    <div id="toc" class="toc-wrapper"></div>
  <div>
</div>


          </div>
        </div>
      </div>
    </div>

     
  <button id="scroll-to-top" class="btn btn-top" aria-label="Scroll To Top">
    <i class="fas fa-arrow-up"></i>
  </button>
 

  </main>

  <div class="footer-wrapper">
  <div class="left-content"></div>
  <div class="right-content">
    <div>Copyright &copy;2025</div>
    <div>Powered By <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> - Theme <a target="_blank" rel="noopener" href="https://github.com/thomasyu929/hexo-theme-peomas">Peomas</a></div>
  </div>
</div>

  <div id="searchModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Search</h5>
        <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="input-wrapper">
          <i class="fas fa-search"></i>
          <input id="search" class="search-input" type="text" placeholder="Input content to search..." />
        </div>
        <ul id="result" class="list-group result-wrapper">
        </ul>
      </div>
    </div>
  </div>
</div>

  
<script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5/dist/js/bootstrap.min.js"></script>


<script src="/js/prism.js"></script>



  
<script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>

  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css">

  
<script src="/js/nprogress.js"></script>



 
  
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script>

  
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.css">

 


<script src="/js/event.js"></script>


<script src="/js/search.js"></script>


<script src="/js/plugin.js"></script>



</body>

</html>